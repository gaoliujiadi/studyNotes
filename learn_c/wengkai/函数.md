# 函数

## 函数定义

```c++
void sum(int begin, int end) {
    int i;
    int sum = 0;
    for (i=begin; i<=end; i++) {
        sum += i;
    }
    printf("%d到%d的和是%d\n", begin, end, sum);
}
```

- `void sum(int begin, int end)`：函数头
  
  - `sum`：函数名

  - `void`：返回类型
  
    `void`表示无类型，不返回
  
  - `int begin, int end`：参数表

- ```c++
  int i;
  int sum = 0;
  for (i=begin; i<=end; i++) {
      sum += i;
  }
  printf("%d到%d的和是%d\n", begin, end, sum);
  ```

  函数体
  

## 函数原型

- 函数头，以分号 `;` 结尾，就构成了函数原型
- 目的是告诉编译器这个函数长什么样
  - 名称
  - 参数
  - 返回类型

```c++
double max(double a, double b);// 函数原型声明
// double max(double, double); 也可

int main() {
    int a, b, c;
    a = 5;
    b = 6;
    c = max(a, b);// 根据原型判断
    printf("%d\n", c);
    
    return 0;
}

double max(double a, double b){// 函数头
    int m;
    if (a>b) {
        m = a;
    }else {
        m = b;
    }
    return m;
}
```

## 使用函数

### 调用函数

`函数名(参数值);`

- `()`起到了表示函数调用的作用
- 即使没有参数也需要`()`
- 如果有参数，则需给出正确的数量和顺序
- 可以传递给函数的值是表达式的结果，包括：
  - 字面量
  - 变量
  - 函数返回值
  - 计算的结果

### 从函数中返回值

```c++
int max(int a, int b){
    int ret;
    if (a>b) {
        ret = a;
    }else {
        ret = b;
    }
    return ret;
}
```

- `return` 停止函数的执行，并送回一个值
- `return;`
- `return 表达式;`

## 函数的参数和变量

> `__func__` 指当前函数的函数名，一个字符串

### 参数传递

**C语言在调用函数时，永远只能传值给函数**

- 函数有自己的变量空间，参数也位于这个独立的空间中，和其他函数没有关系
- 过去，对于函数参数表中的**参数**，叫做“形式参数”；调用函数时给的**值**，叫做“实际参数”

#### 类型不匹配

- 调用函数时给的值与参数类型不匹配是C语言传统上最大的漏洞
- 编译器总是悄悄替你把类型转换好，但这很可能不是你所期望的】
- 后续的语言，C++/Java 在这方面很严格

### 没有参数时

`void f(void);` OR `voidf();`，在传统C中，它表示f函数的参数未知，不代表没有参数

### 本地变量

- 函数的每次运行，就产生了一个独立的变量空间，在这个空间中的变量，是函数这次运行所独有的
- 定义在函数内部的变量就是本地变量
- 参数也是本地变量
- 本地变量是定义在块内的
  - 它可以是定义在函数的块内
  - 也可以定义在语句的块内
  - 甚至可以随便拉一对大括号来定义变量
- 程序运行进入这个块之前，其中的变量就消失了
- 块外面定义的变量在里面仍然有效
- 块里面定义了和外面同名的变量则掩盖了外面的
- 不能在一个块内定义同名的变量
- 本地变量不会被默认初始化
